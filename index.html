// 1440TIME™ • On-Time Token Allocator (Updated)
import React, { useState } from 'react';

export default function TimeAllocatorApp() {
  const [sleep, setSleep] = useState(7);
  const [work, setWork] = useState(10);
  const [salary, setSalary] = useState(0);
  const [entries, setEntries] = useState([]);
  const [minutes, setMinutes] = useState('');
  const [category, setCategory] = useState('PT — Power Time (x1)');
  const [note, setNote] = useState('');

  const fixedTimeLabels = [
    'Eating / Cooking', 'Home Maintenance', 'Kids / Family Care',
    'TV / Social Media', 'Money / Bills', 'Fun Time / Hangout'
  ];

  const ptpLabels = [
    'Physical Fitness', 'Sporting Activities', 'Practice Time',
    'Online Courses', 'Goal 1', 'Goal 2'
  ];

  const handleAddEntry = () => {
    if (!minutes) return;
    const entry = { minutes: parseInt(minutes), category, note };
    setEntries([...entries, entry]);
    setMinutes('');
    setNote('');
  };

  const clearEntries = () => setEntries([]);

  const sleepMinutes = sleep * 60;
  const workMinutes = work * 60;
  const onTimeMinutes = 1440 - sleepMinutes - workMinutes;
  const minuteRate = salary ? (salary / 52 / 5 / workMinutes).toFixed(2) : null;

  return (
    <div className="p-4 max-w-4xl mx-auto text-white">
      <h1 className="text-2xl font-bold mb-2">1440TIME™ • On-Time Token Allocator</h1>
      <p className="mb-4 text-gray-300">Start fresh every day. Hours for sleep & work — the rest is On-Time (minutes).</p>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        <div>
          <label>Sleep (hours)</label>
          <input type="number" value={sleep} onChange={e => setSleep(e.target.value)} className="w-full text-black" />
        </div>
        <div>
          <label>Work (hours, door-to-door)</label>
          <input type="number" value={work} onChange={e => setWork(e.target.value)} className="w-full text-black" />
        </div>
        <div>
          <label>Annual Salary (optional, $)</label>
          <input type="number" value={salary} onChange={e => setSalary(e.target.value)} className="w-full text-black" />
        </div>
      </div>

      <div className="mb-4">
        <p><strong>Sleep:</strong> {sleepMinutes} min | <strong>Work:</strong> {workMinutes} min | <strong>On-Time:</strong> {onTimeMinutes} min left {minuteRate && <>| <strong>$ / work min:</strong> ${minuteRate}</>}</p>
      </div>

      <div className="mb-6">
        <h2 className="text-lg font-semibold mb-2">Fixed Time Expenses (one-tap log)</h2>
        <div className="flex flex-wrap gap-2">
          {fixedTimeLabels.map((label, i) => (
            <button key={i} className="bg-gray-800 px-3 py-1 rounded hover:bg-gray-700">{label}</button>
          ))}
        </div>
        <p className="text-sm text-gray-400 mt-1">Choose your PT activities. You'll enter minutes below.</p>
      </div>

      <div className="mb-6">
        <h2 className="text-lg font-semibold mb-2">PTP Activities (one-tap log)</h2>
        <div className="flex flex-wrap gap-2">
          {ptpLabels.map((label, i) => (
            <button key={i} className="bg-blue-800 px-3 py-1 rounded hover:bg-blue-700">{label}</button>
          ))}
        </div>
        <p className="text-sm text-gray-400 mt-1">Choose your PTP activities. You'll enter minutes below.</p>
      </div>

      <div className="mb-6">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
          <input
            type="number"
            placeholder="Minutes (On-Time)"
            value={minutes}
            onChange={e => setMinutes(e.target.value)}
            className="text-black"
          />
          <select
            value={category}
            onChange={e => setCategory(e.target.value)}
            className="text-black"
          >
            <option>PT — Power Time (x1)</option>
            <option>PTP — Power Time Plus (x5)</option>
            <option>1440X — Multiplier Zone (x10)</option>
          </select>
        </div>
        <input
          type="text"
          placeholder="What did you do? (optional)"
          value={note}
          onChange={e => setNote(e.target.value)}
          className="w-full mt-2 text-black"
        />
        <div className="mt-2 flex gap-2">
          <button onClick={handleAddEntry} className="bg-green-600 px-4 py-1 rounded">Add Entry</button>
          <button onClick={clearEntries} className="bg-gray-600 px-4 py-1 rounded">Clear Entries</button>
        </div>
      </div>

      <div>
        <h2 className="text-lg font-semibold mb-2">Time Log</h2>
        <ul className="list-disc pl-6">
          {entries.map((entry, i) => (
            <li key={i}>{entry.minutes} min — {entry.category}{entry.note ? ` — ${entry.note}` : ''}</li>
          ))}
        </ul>
      </div>
    </div>
  );
}
